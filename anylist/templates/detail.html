{% extends "base.html" %}
{% block title %}{{ header }}{% endblock %}
{% block body %}
<main ng-controller="DetailCtrl" class="description">
	<img src="/static/img/edit.png" class="edit_product" ng-click="add_form()" ng-if="token">

    <div class="add_product_form_parent" ng-show="add_form_visible" ng-click="add_form()">
		<form class="add_product_form" ng-click="add_form()" ng-submit="add_product()">
			<div ng-show="main_check">
                <div class="under_choicer">
				<label>Title:</label><br>
				<input type="text" placeholder="Title" ng-model="product.title"><br>
				<label>Description:</label><br>
				<textarea ng-model="product.description"></textarea>
				<span ng-repeat="item in uploader.queue">
					<span ng-show="uploader.isHTML5" ng-thumb="{file: item._file, height: 150}"></span>
				</span>
				<img src="/static/img/cancel.png" style="width: 50px;height: 50px" ng-click="remove_image()" ng-if="uploader.queue.length == 1">
				<input type="file" nv-file-select uploader="uploader" ng-if="uploader.queue.length == 0">
				<select ng-model="product.old_limit">
					<option ng-repeat="limit in raiting" value="{[{limit.id}]}">{[{limit.name}]}</option>
				</select>
                </div>
				<h2 ng-click="main_checked()" class="choicer">Next</h2>
			</div>
			<div ng-hide="main_check">
				<div class="under_choicer1">
                    <ul ng-repeat-start="group in genre_groups">
                        <li ng-repeat="genre in group.genres">
                            <input type="checkbox" id="{[{genre}]}_1" ng-model="genre.checked" ng-change="select_genre(genre)">
                            <label for="{[{genre}]}_1">{[{genre.name}]}</label>
                        </li>
                    </ul>
                    <div ng-repeat-end></div>
				</div>
                <h2 ng-click="main_checked()" class="choicer">Prev</h2>
			</div>
			<input type="submit" value="Create">
		</form>
	</div>
	<article>
        <h1>{[{product.title}]}</h1>
		<img src="{[{product.avatar_path}]}">
		Genres: <a href="/{[{category}]}/filter/genres/{[{genre.name}]}" ng-repeat="genre in product.genres_list">{[{genre.name}]}, </a>
		<p>Old raiting: <a href="/{[{category}]}/filter/old_limit/{[{raiting[product.old_limit - 1]}]}">{[{raiting[product.old_limit - 1]}]}</a></p>
		<p>
		{[{product.description}]}
		</p>
	</article>
	<nav class="detail">
		<div>
			<p>About</p>
			<a ng-repeat="content in contents" href="{[{content.url}]}">
				<p>{[{content.name}]}</p>
			</a>
		</div>
		<div>
			<input type="number"><span>/{[{product.series_count}]}</span>
			<select>
				<option ng-click="status_move(this, active_status)" ng-repeat="status in statuses" ng-selected="status==active_status">{[{status}]}</option>
			</select>
		</div>
	</nav>
	</main>
{% endblock %}
